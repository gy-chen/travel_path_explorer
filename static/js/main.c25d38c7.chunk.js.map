{"version":3,"sources":["asset/hero_background.jpg","action/route.js","reducer/route.js","action/currentGeolocation.js","reducer/currentGeolocation.js","reducer/index.js","service/baseApi.js","service/explore.js","service/geolocation.js","epic/route.js","epic/geolocation.js","epic/index.js","store/index.js","i18n/index.js","i18n/en.js","i18n/zh.js","component/RedirectToCurrentLocale.js","component/mixin.js","component/PrintButton.js","component/Navbar.js","container/Navbar.js","component/GoogleMapKeyContext.js","component/GoogleMap.js","component/GoogleMapPlacePicker.js","component/PlacePickerCard.js","component/Error.js","component/DirectionSelectWizard.js","component/GoogleStaticMapKeyContext.js","component/GoogleStaticMap.js","component/Image.js","component/Step.js","component/Parking.js","component/Report.js","component/Explore.js","container/Explore.js","component/Intro.js","AppRoutes.js","component/MatomoTracker.js","App.js","registerServiceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","ROUTE_FETCH","ROUTE_REQUEST","ROUTE_RECEIVE","ERROR_RECEIVE","fetchRoute","origin","destination","type","requestRoute","receiveRoute","route","receiveError","error","combineReducers","currentError","state","arguments","length","undefined","action","currentRoute","isFetching","FETCH_GEOLOCATION","SET_CURRENT_GEOLOCATION","setCurrentGeolocation","geolocation","fetchCurrentGeolocation","currentGeolocationReducer","lat","lng","routeReducer","currentGeolocation","api","create","baseURL","process","findRoute","formatLocation","get","STATUS_CODE","OK","UNAVAILABLE","NOT_FOUND","location","concat","getGeolocation","combineEpics","action$","pipe","ofType","switchMap","Observable","observer","next","exploreApi","then","res","ok","data","status","complete","$action","geolocationApi","routeEpic","geolocationEpic","store","enhancer","epicMiddleware","createEpicMiddleware","finalStoreEnhancer","compose","applyMiddleware","createStore","rootReducer","run","rootEpic","configureStore","generateBundles","MESSAGES_ALL","en","zh","LOCALES","negotiateLanguages","userLocales","negotiateLanguagesFlt","defaultLocale","currentLocales","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","locale","bundle","regenerator_default","a","wrap","_context","prev","Symbol","iterator","done","value","FluentBundle","addMessages","t0","return","finish","stop","_marked","this","AppLocalizationProvider","_Component","props","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","bundles","_generateBundles","inherits","createClass","key","prevProps","setState","children","react_default","createElement","fluent_react_compat","Component","RedirectToCurrentLocale","currentLocale","navigator","languages","Redirect","to","Button","styled","button","_templateObject","PrintButton","withLocalization","attrs","onClick","window","print","PrintButton_templateObject","show","getString","defaultProps","propTypes","PropTypes","bool","Wrapper","div","Navbar_templateObject","Brand","h5","_templateObject2","Nav","ol","_templateObject3","NavItem","li","_templateObject4","NavLink","_templateObject5","Navbar","_renderPrintButton","bind","assertThisInitialized","displayPrintButton","component_PrintButton","href","Github","size","connect","GoogleMapKeyContext","React","createContext","GoogleMap_templateObject","Content","GoogleMap_templateObject2","SearchBox","input","GoogleMap_templateObject3","enableSearchBox","GoogleMap","_searchBoxRef","createRef","_mapRef","searchBox","map","google","_initSearchBox","_onSearchBoxPlacesChanged","_this2","_this$props","apiKey","options","onLoaded","objectWithoutProperties","initMap","maps","Map","current","_","invoke","load","esm_extends","prevOptions","isEqual","setOptions","places","addListener","controls","ControlPosition","TOP_LEFT","push","getPlaces","GoogleMap_Wrapper","innerRef","GoogleMapWithContext","forwardRef","ref","component_GoogleMapKeyContext","Consumer","key_","assign","GoogleMapPlacePicker","_gmap","_pickedPlaces","_mapLoaded","onMapLoaded","each","marker","setMap","event","Marker","position","latLng","_removeMarkers","mapOptions","component_GoogleMap","Card","PlacePickerCard_templateObject","Title","h3","PlacePickerCard_templateObject2","Description","PlacePickerCard_templateObject3","PlacePickerCard","title","description","onPickPlace","component_GoogleMapPlacePicker","ERROR_MESSAGE","_ERROR_MESSAGE","defineProperty","ErrorMessage","Error_templateObject","Error","errorCode","DirectionSelectWizard_templateObject","StepAdditionalContentWrapper","DirectionSelectWizard_templateObject2","NextButton","DirectionSelectWizard_templateObject3","DoneButton","DirectionSelectWizard_templateObject4","ErrorWrapper","DirectionSelectWizard_templateObject5","Loading","_templateObject6","DirectionSelectWizard","_renderStepButton","_renderSelectOriginStep","_renderSelectOriginStepButton","_onPickOrigin","_renderSelectDestinationStep","_renderSelectDestinationStepButton","_onPickDestination","_onDoneSelection","_renderError","selectedOrigin","selectedDestination","_ref","component_PlacePickerCard","render","id","isUserSelectedOrigin","disabled","_this3","_this$props2","isUserSelectedDestination","callbackArgs","_ref2","apply","toConsumableArray","component_Error","DirectionSelectWizard_Wrapper","lib","GoogleStaticMapKeyContext","Image","img","GoogleStaticMap_templateObject","GoogleStaticMap","zoom","center","path","markers","params","markersQueryString","chain","join","toMarkersQueryString","src","qs","stringify","withGoogleStaticMapKey","component_GoogleStaticMapKeyContext","Image_templateObject","Step_templateObject","Column","Step_templateObject2","Instruction","Step_templateObject3","Distance","Step_templateObject4","Step","html_instructions","distance","image","overview_polyline","Step_Wrapper","dangerouslySetInnerHTML","__html","component_GoogleStaticMap","component_Image","Parking_templateObject","Parking_templateObject2","Parking","Parking_Wrapper","Parking_Column","Report_templateObject","ContentWrapper","Report_templateObject2","h2","Report_templateObject3","Report","overview","steps","parkings","Report_Wrapper","Report_Title","polyline","points","step","index","component_Step","parking","component_Parking","Explore_templateObject","Explore","_renderCurrentRoute","_renderDirectionSelectWizard","component_Report","onDirectionSelected","onSearchBoxPlacesChanged","component_DirectionSelectWizard","Explore_Wrapper","dispatch","place","newGeolocation","geometry","fade_slide_down","keyframes","Intro_templateObject","Intro_templateObject2","heroBackground","StartExploreLink","Link","Intro_templateObject3","withRouter","match","Intro_Wrapper","url","AppRoutes","_renderAppRoutes","_hasPreferLocales","hasPreferLocales","matchedLocales","isEmpty","intersection","routes","URLS","_ref3","slicedToArray","name","Route","exact","component","err","component_RedirectToCurrentLocale","i18n_AppLocalizationProvider","container_Navbar","Switch","Intro","MatomoTracker","host","_ref$siteId","siteId","_paq","u","script","document","async","defer","head","appendChild","string","isRequired","App","initialize","BrowserRouter","basename","component_MatomoTracker","mapDispatchToProps","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","catch","ReactDOM","es","Provider","src_App","getElementById","URL","addEventListener","fetch","response","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.c25d38c7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/hero_background.a3f2cd54.jpg\";","export const ROUTE_FETCH = \"FETCH_ROUTE\";\nexport const ROUTE_REQUEST = \"REQUEST_ROUTE\";\nexport const ROUTE_RECEIVE = \"RECEIVE_ROUTE\";\nexport const ERROR_RECEIVE = \"RECEIVE_ERROR\";\n\nexport const fetchRoute = (origin, destination) => ({\n  type: ROUTE_FETCH,\n  origin,\n  destination\n});\n\nexport const requestRoute = () => ({\n  type: ROUTE_REQUEST\n});\n\nexport const receiveRoute = route => ({\n  type: ROUTE_RECEIVE,\n  route\n});\n\nexport const receiveError = error => ({\n  type: ERROR_RECEIVE,\n  error\n});\n","import { combineReducers } from \"redux\";\nimport {\n  ROUTE_REQUEST,\n  ROUTE_RECEIVE,\n  ERROR_RECEIVE,\n} from \"../action/route\";\n\nexport const currentRouteReducer = (state = null, action) => {\n  switch (action.type) {\n    case ROUTE_REQUEST:\n      return null;\n    case ROUTE_RECEIVE:\n      return action.route;\n    default:\n      return state;\n  }\n};\n\nexport const isFetchReducer = (state = false, action) => {\n  switch (action.type) {\n    case ROUTE_REQUEST:\n      return true;\n    case ROUTE_RECEIVE:\n    case ERROR_RECEIVE:\n      return false;\n    default:\n      return state;\n  }\n};\n\nexport const currentErrorReducer = (state = null, action) => {\n  switch (action.type) {\n    case ROUTE_REQUEST:\n      return null;\n    case ERROR_RECEIVE:\n      return action.error;\n    default:\n      return state;\n  }\n};\n\nexport default combineReducers({\n  currentError: currentErrorReducer,\n  currentRoute: currentRouteReducer,\n  isFetching: isFetchReducer\n});\n","export const FETCH_GEOLOCATION = \"FETCH_GEOLOCATION\";\nexport const SET_CURRENT_GEOLOCATION = \"SET_CURRENT_GEOLOCATION\";\n\nexport const setCurrentGeolocation = geolocation => ({\n  type: SET_CURRENT_GEOLOCATION,\n  geolocation\n});\n\nexport const fetchCurrentGeolocation = () => ({\n  type: FETCH_GEOLOCATION\n});\n","import { SET_CURRENT_GEOLOCATION } from \"../action/currentGeolocation\";\n\nconst currentGeolocationReducer = (state = null, action) => {\n  switch (action.type) {\n    case SET_CURRENT_GEOLOCATION:\n      return {\n        lat: action.geolocation.lat,\n        lng: action.geolocation.lng\n      };\n    default:\n      return state;\n  }\n};\n\nexport default currentGeolocationReducer;\n","import { combineReducers } from \"redux\";\nimport routeReducer from \"./route\";\nimport currentGeolocationReducer from \"./currentGeolocation\";\n\nexport default combineReducers({\n  route: routeReducer,\n  currentGeolocation: currentGeolocationReducer\n});\n","import { create } from \"apisauce\";\n\nexport const api = create({\n  baseURL: process.env.REACT_APP_API_SERVER || process.env.STORY_BOOK_API_SERVER\n});\n","import { api } from \"./baseApi\";\n\nexport const findRoute = (origin, destination) => {\n  origin = formatLocation(origin);\n  destination = formatLocation(destination);\n  return api.get(\"/explore\", { origin, destination });\n};\n\nexport const STATUS_CODE = {\n  OK: \"OK\",\n  UNAVAILABLE: \"UNAVAILABLE\",\n  NOT_FOUND: \"NOT_FOUND\"\n};\n\n/**\n * Convert location parameter to string format that api accept\n *\n * if location is object, convert to `${location.lat},${location.lng}`.\n *\n * if location is string, do nothing.\n *\n * @param {object|string} location\n */\nexport const formatLocation = location => {\n  if (typeof location === \"object\") {\n    return `${location.lat},${location.lng}`;\n  }\n  return location;\n};\n","import { api } from \"./baseApi\";\n\nexport const getGeolocation = () => {\n  return api.get(\"/geolocation\");\n};\n","import { ofType, combineEpics } from \"redux-observable\";\nimport { Observable } from \"rxjs\";\nimport { switchMap } from \"rxjs/operators\";\nimport { route } from \"../action\";\nimport { explore as exploreApi } from \"../service\";\n\nexport const fetchRouteEpic = action$ =>\n  action$.pipe(\n    ofType(route.ROUTE_FETCH),\n    switchMap(action => {\n      const observable = Observable.create(observer => {\n        observer.next(route.requestRoute());\n        exploreApi.findRoute(action.origin, action.destination).then(res => {\n          if (!res.ok) {\n            observer.next(\n              route.receiveError(exploreApi.STATUS_CODE.UNAVAILABLE)\n            );\n            observer.complete();\n            return;\n          }\n          if (res.data.status !== exploreApi.STATUS_CODE.OK) {\n            observer.next(route.receiveError(res.data.status));\n            observer.complete();\n            return;\n          }\n          if (res.data.route) {\n            observer.next(route.receiveRoute(res.data.route));\n            observer.complete();\n          }\n        });\n      });\n      return observable;\n    })\n  );\n\nexport default combineEpics(fetchRouteEpic);\n","import { ofType, combineEpics } from \"redux-observable\";\nimport { Observable } from \"rxjs\";\nimport { switchMap } from \"rxjs/operators\";\nimport { currentGeolocation } from \"../action\";\nimport { geolocation as geolocationApi } from \"../service\";\n\nexport const fetchGeolocation = $action =>\n  $action.pipe(\n    ofType(currentGeolocation.FETCH_GEOLOCATION),\n    switchMap(() => {\n      const observable = Observable.create(observer => {\n        geolocationApi.getGeolocation().then(res => {\n          if (!res.ok) {\n            return;\n          }\n          const geolocation = {\n            lat: res.data.lat,\n            lng: res.data.lng\n          };\n          observer.next(currentGeolocation.setCurrentGeolocation(geolocation));\n          observer.complete();\n        });\n      });\n      return observable;\n    })\n  );\n\nexport default combineEpics(fetchGeolocation);\n","import { combineEpics } from \"redux-observable\";\nimport routeEpic from \"./route\";\nimport geolocationEpic from \"./geolocation\";\n\nexport default combineEpics(routeEpic, geolocationEpic);\n","import { createStore, applyMiddleware, compose } from \"redux\";\nimport { createEpicMiddleware } from \"redux-observable\";\nimport rootReducer from \"../reducer\";\nimport rootEpic from \"../epic\";\n\nexport const configureStore = (enhancer = undefined) => {\n  const epicMiddleware = createEpicMiddleware();\n\n  const finalStoreEnhancer = enhancer\n    ? compose(\n        applyMiddleware(epicMiddleware),\n        enhancer\n      )\n    : applyMiddleware(epicMiddleware);\n\n  const store = createStore(rootReducer, finalStoreEnhancer);\n\n  epicMiddleware.run(rootEpic);\n\n  return store;\n};\n\nconst store = configureStore();\n\nexport default store;\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FluentBundle } from \"fluent/compat\";\nimport { LocalizationProvider } from \"fluent-react/compat\";\nimport { negotiateLanguages as negotiateLanguagesFlt } from \"fluent-langneg/compat\";\nimport enMessages from \"./en\";\nimport zhMessages from \"./zh\";\n\nconst MESSAGES_ALL = {\n  en: enMessages,\n  zh: zhMessages\n};\n\nexport const LOCALES = [\"en\", \"zh\"];\n\nexport const DEFAULT_LOCALE = \"en\";\n\nexport const hasPreferLocales = userLocales => {\n  const matchedLocales = negotiateLanguagesFlt(userLocales, LOCALES);\n  return !_.isEmpty(_.intersection(userLocales, matchedLocales));\n};\n\nexport const negotiateLanguages = userLocales => {\n  return negotiateLanguagesFlt(userLocales, LOCALES, {\n    defaultLocale: DEFAULT_LOCALE\n  });\n};\n\nexport function* generateBundles(userLocales) {\n  const currentLocales = negotiateLanguages(userLocales);\n\n  for (const locale of currentLocales) {\n    const bundle = new FluentBundle(locale);\n    bundle.addMessages(MESSAGES_ALL[locale]);\n    yield bundle;\n  }\n}\n\n/**\n * AppLocalizationProvider\n *\n * Retreive prefer locale from props, then use it to negotiate languages.\n *\n */\nexport class AppLocalizationProvider extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      bundles: this._generateBundles()\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.locale !== this.props.locale) {\n      this.setState({\n        bundles: this._generateBundles()\n      });\n    }\n  }\n\n  _generateBundles() {\n    const { locale } = this.props;\n\n    return generateBundles([locale]);\n  }\n\n  render() {\n    const { children } = this.props;\n    const { bundles } = this.state;\n\n    return (\n      <LocalizationProvider bundles={bundles}>{children}</LocalizationProvider>\n    );\n  }\n}\n\nAppLocalizationProvider.propTypes = {\n  locale: PropTypes.string\n};\n\nexport const connectAppLocalizationProvider = locale => {\n  const withLocale = Component => {\n    const WithLocale = props => {\n      return (\n        <AppLocalizationProvider locale={locale}>\n          <Component {...props} />\n        </AppLocalizationProvider>\n      );\n    };\n\n    return WithLocale;\n  };\n\n  return withLocale;\n};\n","export default `\nhello = Hello\nloading = loading...\nstart_explore =  explore\nselect_origin = Select Origin\nplease_select_origin = Please select origin.\nnext = Next\nselect_destination = Select Destination\nplease_select_destination = Please select destination.\ndone = Done\noverview = Overview\nsteps = Steps\nparkings = Parkings\nprint = Print\n`;\n","export default `\nhello = 你好\nloading = 載入中...\nstart_explore = 開始探索\nselect_origin = 出發地\nplease_select_origin = 請選擇出發地\nnext = 下一步\nselect_destination = 目的地\nplease_select_destination = 請選擇目的地\ndone = 完成\noverview = 路線圖\nsteps = 路線詳細資訊\nparkings = 停車場\nprint = 列印\n`;\n","import React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { negotiateLanguages } from \"../i18n\";\n\nconst RedirectToCurrentLocale = () => {\n  const currentLocale = negotiateLanguages(navigator.languages)[0];\n  return <Redirect to={`/${currentLocale}`} />;\n};\n\nexport default RedirectToCurrentLocale;\n","import styled from \"styled-components\";\n\nexport const Button = styled.button`\n  padding: 0.375rem 0.75rem;\n  background-color: transparent;\n  font-size: 1rem;\n  line-height: 1.5;\n  font-weight: 500;\n`;\n","import PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { Button } from \"./mixin\";\nimport { withLocalization } from \"fluent-react/compat\";\n\nconst PrintButton = withLocalization(styled(Button).attrs({\n  onClick: () => window.print\n})`\n    background-color: white;\n    display: ${props => (props.show ? \"block\" : \"none\")};\n    \n    &:after {\n        content: '${props => props.getString(\"print\", null, \"Print\")}'\n    }\n`);\n\nPrintButton.defaultProps = {\n  show: true\n};\n\nPrintButton.propTypes = {\n  show: PropTypes.bool\n};\n\nexport default PrintButton;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { Github } from \"styled-icons/fa-brands/Github\";\nimport PrintButton from \"./PrintButton\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  background-color: #f8f9fa;\n  padding: 1rem 0.5rem;\n\n  flex-shrink: 0;\n  flex-grow: 0;\n\n  @media print {\n    display: none;\n  }\n`;\n\nconst Brand = styled.h5`\n  padding: 0 0.5rem;\n  margin: 0;\n  font-weight: 600;\n  font-size: 1.25rem;\n`;\n\nconst Nav = styled.ol`\n  padding: 0;\n  margin: 0;\n  list-style: none;\n\n  display: flex;\n  align-items: center;\n`;\n\nconst NavItem = styled.li`\n  padding: 0 0.5rem;\n  color: rgba(0, 0, 0, 0.5);\n`;\n\nconst NavLink = styled.a`\n  text-decoration: none;\n  color: rgba(0, 0, 0, 0.5);\n\n  &:hover {\n    color: rgba(0, 0, 0, 0.7);\n  }\n`;\n\nclass Navbar extends Component {\n  constructor(props) {\n    super(props);\n\n    this._renderPrintButton = this._renderPrintButton.bind(this);\n  }\n\n  _renderPrintButton() {\n    const { displayPrintButton } = this.props;\n\n    if (displayPrintButton) {\n      return (\n        <NavItem>\n          <PrintButton />\n        </NavItem>\n      );\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <Wrapper>\n        <Brand>TravelPathExplorer</Brand>\n        <Nav>\n          {this._renderPrintButton()}\n          <NavItem>\n            <NavLink href=\"https:///www.github.com/gy-chen/travel_path_explorer\">\n              <Github size={24} />\n            </NavLink>\n          </NavItem>\n        </Nav>\n      </Wrapper>\n    );\n  }\n}\n\nNavbar.propTypes = {\n  displayPrintButton: PropTypes.bool\n};\n\nexport default Navbar;\n","import { connect } from \"react-redux\";\nimport Navbar from \"../component/Navbar\";\n\nconst mapStateToProps = state => ({\n  displayPrintButton: !!state.route.currentRoute\n});\n\nexport default connect(mapStateToProps)(Navbar);\n","import React from \"react\";\n\nconst GoogleMapKeyContext = React.createContext();\n\nexport default GoogleMapKeyContext;\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport load from \"load-script\";\nimport GoogleMapKeyContext from \"./GoogleMapKeyContext\";\n\nconst GOOGLE_MAP_API = \"https://maps.googleapis.com/maps/api/js\";\n\nconst Wrapper = styled.div`\n  position: relative;\n  width: 100%;\n\n  &::before {\n    display: block;\n    content: \"\";\n    padding-top: 56.25%;\n  }\n`;\n\nconst Content = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n`;\n\nconst SearchBox = styled.input`\n  display: ${props => (props.enableSearchBox ? \"inline-block\" : \"none\")};\n`;\n\nexport class GoogleMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this._searchBoxRef = React.createRef();\n    this._mapRef = React.createRef();\n    this.searchBox = null;\n    this.map = null;\n    this.google = null;\n    this._initSearchBox = this._initSearchBox.bind(this);\n    this._onSearchBoxPlacesChanged = this._onSearchBoxPlacesChanged.bind(this);\n  }\n\n  componentDidMount() {\n    const { apiKey, onLoaded, ...options } = this.props;\n\n    const initMap = () => {\n      this.map = new window.google.maps.Map(this._mapRef.current, options);\n      this.google = window.google;\n      this._initSearchBox();\n      _.invoke(this.props, \"onLoaded\");\n    };\n\n    if (!window.google) {\n      window.initMap = initMap;\n\n      load(\n        `${GOOGLE_MAP_API}?${\n          apiKey ? `key=${apiKey}` : \"\"\n        }&callback=initMap&libraries=places`\n      );\n    } else {\n      initMap();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { ...options } = this.props;\n    const { ...prevOptions } = prevProps;\n\n    // TODO maybe need to pick up options for google map api only\n    if (this.map && !_.isEqual(options, prevOptions)) {\n      this.map.setOptions(options);\n    }\n  }\n\n  _initSearchBox() {\n    this.searchBox = new this.google.maps.places.SearchBox(\n      this._searchBoxRef.current\n    );\n    this.searchBox.addListener(\n      \"places_changed\",\n      this._onSearchBoxPlacesChanged\n    );\n    this.map.controls[window.google.maps.ControlPosition.TOP_LEFT].push(\n      this._searchBoxRef.current\n    );\n  }\n\n  _onSearchBoxPlacesChanged() {\n    _.invoke(\n      this.props,\n      \"onSearchBoxPlacesChanged\",\n      this.searchBox.getPlaces()\n    );\n  }\n\n  render() {\n    const { enableSearchBox } = this.props;\n\n    return (\n      <Wrapper>\n        <SearchBox\n          type=\"text\"\n          innerRef={this._searchBoxRef}\n          enableSearchBox={enableSearchBox}\n        />\n        <Content innerRef={this._mapRef} />\n      </Wrapper>\n    );\n  }\n}\n\nGoogleMap.propTypes = {\n  apiKey: PropTypes.string,\n  onLoaded: PropTypes.func,\n  enableSearchBox: PropTypes.bool,\n  onSearcBoxPlacesChanged: PropTypes.func\n};\n\nexport const withGoogleMapKeyContext = Component => {\n  const WithGoogleMapKeyContext = React.forwardRef((props, ref) => {\n    return (\n      <GoogleMapKeyContext.Consumer>\n        {key_ => <Component ref={ref} apiKey={key_} {...props} />}\n      </GoogleMapKeyContext.Consumer>\n    );\n  });\n\n  return WithGoogleMapKeyContext;\n};\n\nexport const GoogleMapWithContext = withGoogleMapKeyContext(GoogleMap);\n\nexport default GoogleMapWithContext;\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport GoogleMap from \"./GoogleMap\";\n\n/**\n * GoogleMapPlacePicker\n *\n * Let user pick a place on the map.\n *\n * Properties of GoogleMap should works.\n *\n * Additional properties:\n *   - onPickPlace(marker): called when user pick a place. Marker is google map Marker type.\n *\n */\nclass GoogleMapPlacePicker extends Component {\n  constructor(props) {\n    super(props);\n\n    this._gmap = React.createRef();\n    this._pickedPlaces = [];\n    this._mapLoaded = false;\n\n    this.onMapLoaded = this.onMapLoaded.bind(this);\n  }\n\n  get map() {\n    return this._gmap.current.map;\n  }\n\n  get google() {\n    return this._gmap.current.google;\n  }\n\n  _removeMarkers() {\n    // hide markers\n    _.each(this._pickedPlaces, marker => {\n      marker.setMap(null);\n    });\n  }\n\n  onMapLoaded() {\n    this._mapLoaded = true;\n    if (!this._gmap.current) {\n      return;\n    }\n\n    this.google.maps.event.addListener(this.map, \"click\", event => {\n      const marker = new this.google.maps.Marker({\n        position: event.latLng,\n        map: this.map\n      });\n\n      _.invoke(this.props, \"onPickPlace\", marker);\n\n      this._removeMarkers();\n      this._pickedPlaces.push(marker);\n    });\n  }\n\n  componentDidMount() {\n    if (this._mapLoaded) {\n      this.onMapLoaded();\n    }\n  }\n\n  render() {\n    const { mapOptions } = this.props;\n\n    return (\n      <GoogleMap ref={this._gmap} onLoaded={this.onMapLoaded} {...mapOptions} />\n    );\n  }\n}\n\nGoogleMapPlacePicker.propTypes = {\n  onPickPlace: PropTypes.func,\n  mapOptions: PropTypes.object\n};\n\nexport default GoogleMapPlacePicker;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport GoogleMapPlacePicker from \"./GoogleMapPlacePicker\";\n\nconst Card = styled.div`\n  padding: 1.25rem;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n`;\n\nconst Title = styled.h3`\n  padding: 0;\n  margin: 0;\n  margin-bottom: 0.75rem;\n  font-size: 1.25rem;\n`;\n\nconst Description = styled.p`\n  padding: 0;\n  margin: 0;\n  margin-bottom: 0.6rem;\n  color: #212529;\n`;\n\n/**\n * Provide hint for user to select a palce\n *\n * Display:\n *   - title\n *   - description\n *   - GoogmeMapPlacePicker\n *   - (optional) additional children diplaying in the bottom of the card\n */\nclass PlacePickerCard extends Component {\n  render() {\n    const {\n      title,\n      description,\n      children,\n      onPickPlace,\n      mapOptions\n    } = this.props;\n\n    return (\n      <Card>\n        <Title>{title}</Title>\n        <Description>{description}</Description>\n        <GoogleMapPlacePicker\n          onPickPlace={onPickPlace}\n          mapOptions={mapOptions}\n        />\n        {children}\n      </Card>\n    );\n  }\n}\n\nPlacePickerCard.propTypes = {\n  title: PropTypes.string,\n  description: PropTypes.string,\n  onPickPlace: PropTypes.func,\n  mapOptions: PropTypes.object\n};\n\nexport default PlacePickerCard;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { STATUS_CODE } from \"../service/explore\";\n\nexport const ERROR_MESSAGE = {\n  [STATUS_CODE.UNAVAILABLE]: \"Server unavailable now. Try again later.\",\n  [STATUS_CODE.NOT_FOUND]: \"No route found. Try different origin or destination\"\n};\n\nconst ErrorMessage = styled.p`\n  margin: 0;\n  color: #dc3545;\n`;\n\n/**\n * Error\n *\n * Display error message according to error code it received.\n *\n */\nconst Error = props => {\n  return <ErrorMessage>{ERROR_MESSAGE[props.errorCode]}</ErrorMessage>;\n};\n\nError.propTypes = {\n  errorCode: PropTypes.string\n};\n\nexport default Error;\n","import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { Wizard, Steps, Step } from \"react-albus\";\nimport { Localized, withLocalization } from \"fluent-react/compat\";\nimport { Button } from \"./mixin\";\nimport PlacePickerCard from \"./PlacePickerCard\";\nimport Error from \"./Error\";\n\nconst Wrapper = styled.div`\n  margin-top: 1.25rem;\n\n  @media (min-width: 768px) {\n    width: 736px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n`;\n\nconst StepAdditionalContentWrapper = styled.div`\n  margin-top: 0.6rem;\n`;\n\nconst NextButton = styled(Button)``;\n\nconst DoneButton = styled(Button)``;\n\nconst ErrorWrapper = styled.div`\n  margin-top: 0.6rem;\n`;\n\nconst Loading = styled.p``;\n\n/**\n * DirectionSelectWizard\n *\n * Let user select origin and destination, step by step.\n *\n * Provide properties:\n *   - onDirectionSelected (origin, destination): callback called when user done selected\n *     origin and destination.\n *\n */\nclass DirectionSelectWizard extends Component {\n  constructor(props) {\n    super(props);\n\n    this._renderStepButton = this._renderStepButton.bind(this);\n    this._renderSelectOriginStep = this._renderSelectOriginStep.bind(this);\n    this._renderSelectOriginStepButton = this._renderSelectOriginStepButton.bind(\n      this\n    );\n    this._onPickOrigin = this._onPickOrigin.bind(this);\n    this._renderSelectDestinationStep = this._renderSelectDestinationStep.bind(\n      this\n    );\n    this._renderSelectDestinationStepButton = this._renderSelectDestinationStepButton.bind(\n      this\n    );\n    this._onPickDestination = this._onPickDestination.bind(this);\n    this._onDoneSelection = this._onDoneSelection.bind(this);\n    this._renderError = this._renderError.bind(this);\n\n    this.state = {\n      selectedOrigin: null,\n      selectedDestination: null\n    };\n  }\n\n  _renderSelectOriginStep({ next }) {\n    const { getString, mapOptions } = this.props;\n\n    return (\n      <PlacePickerCard\n        title={getString(\"select_origin\", null, \"Select Origin\")}\n        description={getString(\n          \"please_select_origin\",\n          null,\n          \"Please select origin\"\n        )}\n        onPickPlace={this._onPickOrigin}\n        mapOptions={mapOptions}\n      >\n        {this._renderStepButton(() => this._renderSelectOriginStepButton(next))}\n      </PlacePickerCard>\n    );\n  }\n\n  _renderStepButton(render) {\n    const { isFetching } = this.props;\n\n    if (isFetching) {\n      return (\n        <Localized id=\"loading\">\n          <Loading>loading...</Loading>\n        </Localized>\n      );\n    }\n\n    return render();\n  }\n\n  _renderSelectOriginStepButton(next) {\n    const { selectedOrigin } = this.state;\n\n    const isUserSelectedOrigin = !!selectedOrigin;\n\n    return (\n      <StepAdditionalContentWrapper>\n        <Localized id=\"next\">\n          <NextButton disabled={!isUserSelectedOrigin} onClick={next}>\n            Next\n          </NextButton>\n        </Localized>\n        {this._renderError()}\n      </StepAdditionalContentWrapper>\n    );\n  }\n\n  _onPickOrigin(marker) {\n    this.setState({\n      selectedOrigin: marker\n    });\n  }\n\n  _renderSelectDestinationStep() {\n    const { getString, mapOptions } = this.props;\n\n    return (\n      <PlacePickerCard\n        title={getString(\"select_destination\", null, \"Select Destination\")}\n        description={getString(\n          \"please_select_destination\",\n          null,\n          \"Please select destination.\"\n        )}\n        onPickPlace={this._onPickDestination}\n        mapOptions={mapOptions}\n      >\n        {this._renderStepButton(() =>\n          this._renderSelectDestinationStepButton()\n        )}\n      </PlacePickerCard>\n    );\n  }\n\n  _renderSelectDestinationStepButton() {\n    const isUserSelectedDestination = !!this.state.selectedDestination;\n\n    return (\n      <StepAdditionalContentWrapper>\n        <Localized id=\"done\">\n          <DoneButton\n            disabled={!isUserSelectedDestination}\n            onClick={this._onDoneSelection}\n          >\n            Done\n          </DoneButton>\n        </Localized>\n        {this._renderError()}\n      </StepAdditionalContentWrapper>\n    );\n  }\n\n  _onPickDestination(marker) {\n    this.setState({\n      selectedDestination: marker\n    });\n  }\n\n  _onDoneSelection() {\n    const callbackArgs = _.map(\n      [this.state.selectedOrigin, this.state.selectedDestination],\n      ({ position }) => ({\n        lat: position.lat(),\n        lng: position.lng()\n      })\n    );\n\n    _.invoke(this.props, \"onDirectionSelected\", ...callbackArgs);\n  }\n\n  _renderError() {\n    const { errorCode } = this.props;\n    if (errorCode) {\n      return (\n        <ErrorWrapper>\n          <Error errorCode={errorCode} />\n        </ErrorWrapper>\n      );\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      <Wrapper>\n        <Wizard>\n          <Steps>\n            <Step id=\"selectOrigin\" render={this._renderSelectOriginStep} />\n            <Step\n              id=\"selectDestination\"\n              render={this._renderSelectDestinationStep}\n            />\n          </Steps>\n        </Wizard>\n      </Wrapper>\n    );\n  }\n}\n\nDirectionSelectWizard.propTypes = {\n  getString: PropTypes.func.isRequired,\n  onDirectionSelected: PropTypes.func,\n  isFetching: PropTypes.bool,\n  errorCode: PropTypes.string,\n  mapOptions: PropTypes.object\n};\n\nexport default withLocalization(DirectionSelectWizard);\n","import React from \"react\";\n\nconst GoogleStaticMapKeyContext = React.createContext();\n\nexport default GoogleStaticMapKeyContext;\n","import _ from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport qs from \"qs\";\nimport GoogleStaticMapKeyContext from \"./GoogleStaticMapKeyContext\";\n\nconst GOOGLE_STATIC_MAP_API = \"https://maps.googleapis.com/maps/api/staticmap?\";\n\nconst Image = styled.img`\n  max-width: 100%;\n  height: auto;\n`;\n\n// TODO support mark style\nconst toMarkersQueryString = markers => {\n  const markersQueryString = _.chain(markers)\n    .map(marker => `${marker.lat},${marker.lng}`)\n    .join(\"|\");\n  return `|${markersQueryString}`;\n};\n\nconst GoogleStaticMap = props => {\n  const { size, zoom, center, path, key_, markers } = props;\n\n  const params = { size, zoom, key: key_ };\n\n  if (path) {\n    params[\"path\"] = `enc:${path}`;\n  }\n  if (center) {\n    params[\"center\"] = `${center[\"lat\"]},${center[\"lng\"]}`;\n  }\n  if (markers) {\n    params[\"markers\"] = toMarkersQueryString(markers);\n  }\n\n  const src = GOOGLE_STATIC_MAP_API + qs.stringify(params);\n\n  return <Image src={src} />;\n};\n\nGoogleStaticMap.propTypes = {\n  size: PropTypes.string,\n  path: PropTypes.string,\n  center: PropTypes.shape({\n    lat: PropTypes.number,\n    lng: PropTypes.number\n  }),\n  zoom: PropTypes.number,\n  markers: PropTypes.arrayOf(\n    PropTypes.shape({\n      position: PropTypes.shape({\n        lat: PropTypes.number,\n        lng: PropTypes.number\n      })\n    })\n  ),\n  key_: PropTypes.string.isRequired\n};\n\nGoogleStaticMap.defaultProps = {\n  size: \"320x300\"\n};\n\nconst withGoogleStaticMapKey = Component => {\n  const WithGoogleStaticMapKey = props => {\n    return (\n      <GoogleStaticMapKeyContext.Consumer>\n        {key_ => <Component key_={key_} {...props} />}\n      </GoogleStaticMapKeyContext.Consumer>\n    );\n  };\n\n  return WithGoogleStaticMapKey;\n};\n\nexport default withGoogleStaticMapKey(GoogleStaticMap);\n","import styled from 'styled-components';\n\nconst Image = styled.img`\n  max-width: 100%;\n  height: auto;\n`;\n\nexport default Image;","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport GoogleStaticMap from \"./GoogleStaticMap\";\nimport Image from './Image';\n\nconst Wrapper = styled.div`\n  display: flex;\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n  margin-left: 8px;\n  margin-right: 8px;\n  border-bottom: 1px solid #e0e0e0;\n`;\n\nconst Column = styled.div`\n  flex: 0 0 33%;\n  padding-left: 15px;\n  padding-right: 15px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst Instruction = styled.p``;\n\nconst Distance = styled.p``;\n\n/**\n * Step\n *\n * Display:\n *   - instruction\n *   - distance\n *   - streetview image\n *   - overview\n */\nconst Step = props => {\n  const {\n    html_instructions,\n    distance,\n    location,\n    image,\n    overview_polyline\n  } = props;\n\n  return (\n    <Wrapper>\n      <Column>\n        <Instruction dangerouslySetInnerHTML={{ __html: html_instructions }} />\n        <Distance>{distance}</Distance>\n      </Column>\n      <Column>\n        <GoogleStaticMap\n          center={location}\n          path={overview_polyline}\n          markers={[location]}\n          zoom={17}\n        />\n      </Column>\n      <Column>\n        <Image src={image} />\n      </Column>\n    </Wrapper>\n  );\n};\n\nStep.propTypes = {\n  html_instructions: PropTypes.string,\n  distance: PropTypes.string,\n  location: PropTypes.shape({\n    lat: PropTypes.number,\n    lng: PropTypes.number\n  }),\n  overview_polyline: PropTypes.string,\n  image: PropTypes.string\n};\n\nexport default Step;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport GoogleStaticMap from \"./GoogleStaticMap\";\nimport Image from './Image';\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n  margin-left: 8px;\n  margin-right: 8px;\n  border-bottom: 1px solid #e0e0e0;\n`;\n\nconst Column = styled.div`\n  flex: 0 0 33%;\n  box-sizing: border-box;\n  margin-left: 4px;\n  margin-right: 4px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\n/**\n * Parking\n *\n * display parking information:\n *   - location on the map\n *   - streetview image\n */\nconst Parking = props => {\n  const { location, image } = props;\n\n  return (\n    <Wrapper>\n      <Column>\n        <GoogleStaticMap center={location} markers={[location]} zoom={16} />\n      </Column>\n      <Column>\n        <Image src={image} />\n      </Column>\n    </Wrapper>\n  );\n};\n\nParking.propTypes = {\n  location: PropTypes.shape({\n    lat: PropTypes.number,\n    lnt: PropTypes.number\n  }),\n  image: PropTypes.string\n};\n\nexport default Parking;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { Localized } from \"fluent-react/compat\";\n\nimport GoogleStaticMap from \"./GoogleStaticMap\";\nimport Step from \"./Step\";\nimport Parking from \"./Parking\";\n\nconst Wrapper = styled.div`\n  @media screen {\n    display: flex;\n    justify-content: center;\n    background-color: #e0e0e0;\n    padding-top: 32px;\n    padding-bottom: 32px;\n  }\n`;\n\nconst ContentWrapper = styled.div`\n  width: 210mm;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: white;\n  padding: 12px;\n\n  @media screen {\n    box-shadow: 0 0.5mm 2mm rgba(0, 0, 0, 0.3);\n  }\n`;\n\nconst Title = styled.h2`\n  padding-bottom: 8px;\n  border-bottom: 1px solid #e0e0e0;\n`;\n\n/**\n * Generate travel path explore report\n *\n * Display info:\n *   - overview\n *   - steps\n *   - parkings\n */\nconst Report = props => {\n  const { overview, steps, parkings } = props;\n\n  return (\n    <Wrapper>\n      <ContentWrapper>\n        <Localized id=\"overview\">\n          <Title>Overview</Title>\n        </Localized>\n        <GoogleStaticMap path={overview.polyline.points} />\n        <Localized id=\"steps\">\n          <Title>Steps</Title>\n        </Localized>\n        {steps.map((step, index) => (\n          <Step\n            key={index}\n            overview_polyline={overview.polyline.points}\n            {...step}\n          />\n        ))}\n        <Localized id=\"parkings\">\n          <Title>Parkings</Title>\n        </Localized>\n        {parkings.map((parking, index) => (\n          <Parking key={index} {...parking} />\n        ))}\n      </ContentWrapper>\n    </Wrapper>\n  );\n};\n\nReport.propTypes = {\n  overview: PropTypes.shape({\n    polyline: PropTypes.shape({\n      points: PropTypes.string\n    })\n  }),\n  steps: PropTypes.arrayOf(\n    PropTypes.shape({\n      html_instructions: PropTypes.string,\n      distance: PropTypes.string,\n      location: PropTypes.shape({\n        lat: PropTypes.number,\n        lng: PropTypes.number\n      }),\n      image: PropTypes.string\n    })\n  ),\n  parking: PropTypes.arrayOf(\n    PropTypes.shape({\n      location: PropTypes.shape({\n        lat: PropTypes.number,\n        lng: PropTypes.number\n      }),\n      image: PropTypes.string\n    })\n  )\n};\n\nexport default Report;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport DirectionSelectWizard from \"./DirectionSelectWizard\";\nimport Report from \"./Report\";\n\nconst Wrapper = styled.div``;\n\n/**\n * Explore\n *\n * Provide explore function:\n *   1. let user choose origin and destination\n *   2. display route from origin to destination\n */\nclass Explore extends Component {\n  constructor(props) {\n    super(props);\n\n    this._renderCurrentRoute = this._renderCurrentRoute.bind(this);\n    this._renderDirectionSelectWizard = this._renderDirectionSelectWizard.bind(\n      this\n    );\n  }\n\n  _renderCurrentRoute() {\n    const { currentRoute } = this.props;\n\n    if (currentRoute) {\n      return <Report {...currentRoute} />;\n    }\n    return null;\n  }\n\n  _renderDirectionSelectWizard() {\n    const {\n      currentRoute,\n      currentGeolocation,\n      isFetching,\n      onDirectionSelected,\n      onSearchBoxPlacesChanged,\n      currentError\n    } = this.props;\n    if (!currentRoute) {\n      const mapOptions = {\n        enableSearchBox: true,\n        onSearchBoxPlacesChanged: onSearchBoxPlacesChanged,\n        zoom: 12,\n        center: currentGeolocation\n      };\n\n      return (\n        <DirectionSelectWizard\n          isFetching={isFetching}\n          onDirectionSelected={onDirectionSelected}\n          errorCode={currentError}\n          mapOptions={mapOptions}\n        />\n      );\n    }\n    return null;\n  }\n\n  render() {\n    return (\n      <Wrapper>\n        {this._renderCurrentRoute()}\n        {this._renderDirectionSelectWizard()}\n      </Wrapper>\n    );\n  }\n}\n\nExplore.propTypes = {\n  isFetching: PropTypes.bool,\n  currentRoute: PropTypes.shape({\n    overview: PropTypes.shape({\n      polyline: PropTypes.shape({\n        points: PropTypes.string\n      })\n    }),\n    steps: PropTypes.arrayOf(\n      PropTypes.shape({\n        html_instructions: PropTypes.string,\n        distance: PropTypes.string,\n        location: PropTypes.shape({\n          lat: PropTypes.number,\n          lng: PropTypes.number\n        }),\n        image: PropTypes.string\n      })\n    ),\n    parking: PropTypes.arrayOf(\n      PropTypes.shape({\n        location: PropTypes.shape({\n          lat: PropTypes.number,\n          lng: PropTypes.number\n        }),\n        image: PropTypes.string\n      })\n    )\n  }),\n  currentGeolocation: PropTypes.shape({\n    lat: PropTypes.number,\n    lng: PropTypes.numbers\n  }),\n  currentError: PropTypes.string,\n  onDirectionSelected: PropTypes.func,\n  onSearchBoxPlacesChanged: PropTypes.func\n};\n\nExplore.defaultProps = {\n  isFetching: false\n};\n\nexport default Explore;\n","import { connect } from \"react-redux\";\nimport Explore from \"../component/Explore\";\nimport { route, currentGeolocation } from \"../action\";\n\nconst mapStateToProps = state => ({\n  currentError: state.route.currentError,\n  currentRoute: state.route.currentRoute,\n  currentGeolocation: state.currentGeolocation,\n  isFetching: state.route.isFetching\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onDirectionSelected: (origin, destination) =>\n    dispatch(route.fetchRoute(origin, destination)),\n  onSearchBoxPlacesChanged: places => {\n    if (!places) {\n      return;\n    }\n    const place = places[0];\n    const newGeolocation = {\n      lat: place.geometry.location.lat(),\n      lng: place.geometry.location.lng()\n    };\n    dispatch(currentGeolocation.setCurrentGeolocation(newGeolocation));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Explore);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled, { keyframes } from \"styled-components\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Localized } from \"fluent-react/compat\";\nimport heroBackground from '../asset/hero_background.jpg';\n\nconst fade_slide_down = keyframes`\n  from {\n    opacity: 0;\n    transform: translateY(-4rem);\n  }\n\n  to {\n    opacity: 1;\n    transform: none;\n  }\n`;\n\nconst Wrapper = styled.div`\n  height: calc(100vh - 58px);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  overflow: hidden;\n\n  ::before {\n    content: '';\n    background-image: \n      linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,.8)), \n      url(${heroBackground});\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    z-index: -1;\n    background-position: bottom;\n    background-size: cover;\n    animation: ${fade_slide_down} 4s cubic-bezier(.16,.85,.63,.81) forwards;\n  }\n\n  ::after {\n    content: '';\n    position: absolute;\n    left: -5%;\n    right: -5%;\n    top: 90%;\n    bottom: -50%;\n    background-color: white;\n    transform: rotateZ(-3deg);\n    transform-origin: 0 0;\n  }\n`;\n\nconst StartExploreLink = styled(Link)`\n  color: white;\n  text-transform: uppercase;\n  border: 2px solid;\n  padding: 0.375rem 0.75rem;\n  background-color: transparent;\n  font-size: 1rem;\n  line-height: 1.5;\n  font-weight: 500;\n`;\n\n/**\n * Intro page\n */\nconst Intro = props => {\n  const { match } = props;\n\n  return (\n    <Wrapper>\n      <Localized id=\"start_explore\">\n        <StartExploreLink to={`${match.url}/explore`}>\n          Explore\n        </StartExploreLink>\n      </Localized>\n    </Wrapper>\n  );\n};\n\nIntro.propTypes = {\n  match: PropTypes.object\n};\n\nexport default withRouter(Intro);\n","import React, { Component } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Navbar from \"./container/Navbar\";\nimport Explore from \"./container/Explore\";\nimport Intro from \"./component/Intro\";\nimport RedirectToCurrentLocale from \"./component/RedirectToCurrentLocale\";\nimport { hasPreferLocales, AppLocalizationProvider } from \"./i18n\";\n\nclass AppRoutes extends Component {\n  // [[name, Component], ...]\n  // name will be used to construct route, final route url will become /<locale>/<name>\n  static URLS = [[\"explore\", Explore], [\"\", Intro]];\n\n  constructor(props) {\n    super(props);\n\n    this._renderAppRoutes = this._renderAppRoutes.bind(this);\n    this._hasPreferLocales = this._hasPreferLocales.bind(this);\n\n    this.state = {\n      hasPreferLocales: this._hasPreferLocales()\n    };\n  }\n\n  _hasPreferLocales() {\n    const {\n      match: {\n        params: { locale }\n      }\n    } = this.props;\n    return hasPreferLocales([locale]);\n  }\n\n  _renderAppRoutes() {\n    const { match } = this.props;\n\n    const routes = [];\n    for (const [name, Component] of AppRoutes.URLS) {\n      const path = `${match.url}/${name}`;\n      routes.push(<Route key={path} exact path={path} component={Component} />);\n    }\n    return routes;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.match.params.locale !== this.props.match.params.locale) {\n      this.setState({\n        hasPreferLocales: this._hasPreferLocales()\n      });\n    }\n  }\n\n  render() {\n    const { hasPreferLocales } = this.state;\n    if (!hasPreferLocales) {\n      return <RedirectToCurrentLocale />;\n    }\n\n    const {\n      match: {\n        params: { locale }\n      }\n    } = this.props;\n\n    return (\n      <AppLocalizationProvider locale={locale}>\n        <div>\n          <Navbar />\n          <Switch>\n            {this._renderAppRoutes()}\n            <Route path=\"/\" component={RedirectToCurrentLocale} />\n          </Switch>\n        </div>\n      </AppLocalizationProvider>\n    );\n  }\n}\n\nexport default AppRoutes;\n","import PropTypes from \"prop-types\";\n\nconst MatomoTracker = ({ host, siteId = \"1\" }) => {\n  if (process.env.NODE_ENV !== \"production\") {\n    return null;\n  }\n\n  if (window._paq !== undefined) {\n    return null;\n  }\n\n  const u = `//${host}/`;\n  const _paq = [];\n  _paq.push([\"trackPageView\"]);\n  _paq.push([\"enableLinkTracking\"]);\n  _paq.push([\"setTrackerUrl\", `${u}piwik.php`]);\n  _paq.push([\"setSiteId\", siteId]);\n  window._paq = _paq;\n\n  const script = document.createElement(\"script\");\n  script.src = `${u}piwik.js`;\n  script.type = \"text/javascript\";\n  script.async = true;\n  script.defer = true;\n\n  document.head.appendChild(script);\n  return null;\n};\n\nMatomoTracker.propTypes = {\n  host: PropTypes.string.isRequired,\n  siteId: PropTypes.string\n};\n\nexport default MatomoTracker;\n","import React, { Component } from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport RedirectToCurrentLocale from \"./component/RedirectToCurrentLocale\";\nimport AppRoutes from \"./AppRoutes\";\nimport { currentGeolocation } from \"./action\";\nimport MatomoTracker from \"./component/MatomoTracker\";\n\n/**\n * App\n *\n * Handle routing, display correct information according to routing.\n *\n */\nclass App extends Component {\n  componentDidMount() {\n    const { initialize } = this.props;\n\n    initialize();\n  }\n\n  render() {\n    return (\n      <Router basename={process.env.REACT_APP_ROUTER_BASENAME}>\n        <div>\n          <Switch>\n            <Route path=\"/:locale\" component={AppRoutes} />\n            <Route path=\"/\" component={RedirectToCurrentLocale} />\n          </Switch>\n          <MatomoTracker host={process.env.REACT_APP_TRACKER_SERVER} />\n        </div>\n      </Router>\n    );\n  }\n}\n\nconst mapDispatchToProps = {\n  initialize: currentGeolocation.fetchCurrentGeolocation\n};\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(App);\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://goo.gl/SC7cgQ\"\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log(\"New content is available; please refresh.\");\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport ReactDOM from \"react-dom\";\nimport store from \"./store\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport GoogleMapKeyContext from \"./component/GoogleMapKeyContext\";\nimport GoogleStaticMapKeyContext from \"./component/GoogleStaticMapKeyContext\";\nimport registerServiceWorker from \"./registerServiceWorker\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <GoogleStaticMapKeyContext.Provider\n      value={process.env.REACT_APP_GMAPS_API_KEY}\n    >\n      <GoogleMapKeyContext.Provider value={process.env.REACT_APP_GMAPS_API_KEY}>\n        <App />\n      </GoogleMapKeyContext.Provider>\n    </GoogleStaticMapKeyContext.Provider>\n  </Provider>,\n  document.getElementById(\"root\")\n);\nregisterServiceWorker();\n"],"sourceRoot":""}